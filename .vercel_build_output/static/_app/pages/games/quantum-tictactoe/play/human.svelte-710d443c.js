import{S as e,i as s,s as t,e as a,t as n,c as r,a as l,g as c,d as i,b as o,I as h,f as u,F as d,h as f,J as g,K as m,G as v,j as p,m as S,o as $,v as k,r as q,w as y,k as b,n as M,L as w,M as C,B as T,u as E,N,O as P,P as X,H as x}from"../../../../chunks/vendor-0b022714.js";import{T as Y}from"../../../../chunks/index-8eead769.js";function j(e,s,t){const a=e.slice();return a[5]=s[t],a}function A(e,s){let t,g,m,v,p,S=s[5][0]+"",$=s[5][1]+"";return{key:e,first:null,c(){t=a("span"),g=n(S),m=a("sub"),v=n($),this.h()},l(e){t=r(e,"SPAN",{class:!0});var s=l(t);g=c(s,S),m=r(s,"SUB",{});var a=l(m);v=c(a,$),a.forEach(i),s.forEach(i),this.h()},h(){o(t,"class",p=h(s[1](s[5]))+" svelte-1q8q4d7"),this.first=t},m(e,s){u(e,t,s),d(t,g),d(t,m),d(m,v)},p(e,a){s=e,1&a&&S!==(S=s[5][0]+"")&&f(g,S),1&a&&$!==($=s[5][1]+"")&&f(v,$),1&a&&p!==(p=h(s[1](s[5]))+" svelte-1q8q4d7")&&o(t,"class",p)},d(e){e&&i(t)}}}function G(e){let s,t=[],n=new Map,c=e[0];const h=e=>e[5];for(let a=0;a<c.length;a+=1){let s=j(e,c,a),r=h(s);n.set(r,t[a]=A(r,s))}return{c(){s=a("div");for(let e=0;e<t.length;e+=1)t[e].c();this.h()},l(e){s=r(e,"DIV",{class:!0});var a=l(s);for(let s=0;s<t.length;s+=1)t[s].l(a);a.forEach(i),this.h()},h(){o(s,"class","quantum-marks svelte-1q8q4d7")},m(e,a){u(e,s,a);for(let n=0;n<t.length;n+=1)t[n].m(s,null)},p(e,[a]){3&a&&(c=e[0],t=g(t,a,h,1,e,c,n,s,m,A,null,j))},i:v,o:v,d(e){e&&i(s);for(let s=0;s<t.length;s+=1)t[s].d()}}}function I(e,s,t){let{qMarks:a}=s,{cycleMarks:n}=s,{isHighlighted:r}=s,{isBeingCollapsed:l}=s;return e.$$set=e=>{"qMarks"in e&&t(0,a=e.qMarks),"cycleMarks"in e&&t(2,n=e.cycleMarks),"isHighlighted"in e&&t(3,r=e.isHighlighted),"isBeingCollapsed"in e&&t(4,l=e.isBeingCollapsed)},[a,function(e){if(null==n?void 0:n.includes(e)){if(l)return"red";if(r)return"blue"}return"white"},n,r,l]}class O extends e{constructor(e){super(),s(this,e,I,G,t,{qMarks:0,cycleMarks:2,isHighlighted:3,isBeingCollapsed:4})}}function B(e){let s,t,h,g,m,p=e[0][0]+"",S=e[0][1]+"";return{c(){s=a("div"),t=a("span"),h=n(p),g=a("sub"),m=n(S),this.h()},l(e){s=r(e,"DIV",{class:!0});var a=l(s);t=r(a,"SPAN",{class:!0});var n=l(t);h=c(n,p),g=r(n,"SUB",{class:!0});var o=l(g);m=c(o,S),o.forEach(i),n.forEach(i),a.forEach(i),this.h()},h(){o(g,"class","svelte-12m3ax2"),o(t,"class","svelte-12m3ax2"),o(s,"class","classical-mark svelte-12m3ax2")},m(e,a){u(e,s,a),d(s,t),d(t,h),d(t,g),d(g,m)},p(e,[s]){1&s&&p!==(p=e[0][0]+"")&&f(h,p),1&s&&S!==(S=e[0][1]+"")&&f(m,S)},i:v,o:v,d(e){e&&i(s)}}}function H(e,s,t){let{cMark:a}=s;return e.$$set=e=>{"cMark"in e&&t(0,a=e.cMark)},[a]}class D extends e{constructor(e){super(),s(this,e,H,B,t,{cMark:0})}}function R(e){let s,t;return s=new D({props:{cMark:e[0]}}),{c(){p(s.$$.fragment)},l(e){S(s.$$.fragment,e)},m(e,a){$(s,e,a),t=!0},p(e,t){const a={};1&t&&(a.cMark=e[0]),s.$set(a)},i(e){t||(k(s.$$.fragment,e),t=!0)},o(e){q(s.$$.fragment,e),t=!1},d(e){y(s,e)}}}function V(e){let s,t;return s=new O({props:{isHighlighted:e[3],isBeingCollapsed:e[4],qMarks:e[1],cycleMarks:e[2]}}),{c(){p(s.$$.fragment)},l(e){S(s.$$.fragment,e)},m(e,a){$(s,e,a),t=!0},p(e,t){const a={};8&t&&(a.isHighlighted=e[3]),16&t&&(a.isBeingCollapsed=e[4]),2&t&&(a.qMarks=e[1]),4&t&&(a.cycleMarks=e[2]),s.$set(a)},i(e){t||(k(s.$$.fragment,e),t=!0)},o(e){q(s.$$.fragment,e),t=!1},d(e){y(s,e)}}}function L(e){let s,t,n,c,f,g,m,v,p,S,$,y,N,P,X,x,Y,j,A,G=e[0]&&R(e),I=e[1]&&V(e);return{c(){s=a("div"),t=a("div"),n=a("span"),c=a("i"),f=b(),g=a("span"),m=a("i"),v=b(),p=a("span"),S=a("i"),$=b(),y=a("span"),N=a("i"),P=b(),G&&G.c(),X=b(),I&&I.c(),this.h()},l(e){s=r(e,"DIV",{class:!0});var a=l(s);t=r(a,"DIV",{});var o=l(t);n=r(o,"SPAN",{class:!0});var h=l(n);c=r(h,"I",{class:!0}),l(c).forEach(i),h.forEach(i),f=M(o),g=r(o,"SPAN",{class:!0});var u=l(g);m=r(u,"I",{class:!0}),l(m).forEach(i),u.forEach(i),v=M(o),p=r(o,"SPAN",{class:!0});var d=l(p);S=r(d,"I",{class:!0}),l(S).forEach(i),d.forEach(i),$=M(o),y=r(o,"SPAN",{class:!0});var k=l(y);N=r(k,"I",{class:!0}),l(N).forEach(i),k.forEach(i),o.forEach(i),P=M(a),G&&G.l(a),X=M(a),I&&I.l(a),a.forEach(i),this.h()},h(){o(c,"class","svelte-197gjhg"),o(n,"class","border-dashing svelte-197gjhg"),o(m,"class","svelte-197gjhg"),o(g,"class","border-dashing svelte-197gjhg"),o(S,"class","svelte-197gjhg"),o(p,"class","border-dashing svelte-197gjhg"),o(N,"class","svelte-197gjhg"),o(y,"class","border-dashing svelte-197gjhg"),o(s,"class",x=h(e[6])+" svelte-197gjhg")},m(a,r){u(a,s,r),d(s,t),d(t,n),d(n,c),d(t,f),d(t,g),d(g,m),d(t,v),d(t,p),d(p,S),d(t,$),d(t,y),d(y,N),d(s,P),G&&G.m(s,null),d(s,X),I&&I.m(s,null),Y=!0,j||(A=w(s,"click",C(e[7])),j=!0)},p(e,[t]){e[0]?G?(G.p(e,t),1&t&&k(G,1)):(G=R(e),G.c(),k(G,1),G.m(s,X)):G&&(T(),q(G,1,1,(()=>{G=null})),E()),e[1]?I?(I.p(e,t),2&t&&k(I,1)):(I=V(e),I.c(),k(I,1),I.m(s,null)):I&&(T(),q(I,1,1,(()=>{I=null})),E()),(!Y||64&t&&x!==(x=h(e[6])+" svelte-197gjhg"))&&o(s,"class",x)},i(e){Y||(k(G),k(I),Y=!0)},o(e){q(G),q(I),Y=!1},d(e){e&&i(s),G&&G.d(),I&&I.d(),j=!1,A()}}}function U(e,s,t){let a,{cMark:n}=s,{qMarks:r}=s,{cycleMarks:l}=s,{isHighlighted:c}=s,{isBeingCollapsed:i}=s,{onClick:o}=s;return e.$$set=e=>{"cMark"in e&&t(0,n=e.cMark),"qMarks"in e&&t(1,r=e.qMarks),"cycleMarks"in e&&t(2,l=e.cycleMarks),"isHighlighted"in e&&t(3,c=e.isHighlighted),"isBeingCollapsed"in e&&t(4,i=e.isBeingCollapsed),"onClick"in e&&t(5,o=e.onClick)},e.$$.update=()=>{25&e.$$.dirty&&t(6,a=n?"square":`square${c?" highlighted":""}${i?" selected":""}`)},[n,r,l,c,i,o,a,e=>o()]}class Q extends e{constructor(e){super(),s(this,e,U,L,t,{cMark:0,qMarks:1,cycleMarks:2,isHighlighted:3,isBeingCollapsed:4,onClick:5})}}function _(e,s,t){const a=e.slice();return a[11]=s[t],a}function W(e,s,t){const a=e.slice();return a[14]=s[t],a}function F(e){let s,t;function a(){return e[10](e[11],e[14])}return s=new Q({props:{cMark:e[0][3*e[11]+e[14]],qMarks:e[1][3*e[11]+e[14]],cycleMarks:e[2],isHighlighted:e[5](e[11],e[14]),isBeingCollapsed:e[3]===3*e[11]+e[14],onClick:a}}),{c(){p(s.$$.fragment)},l(e){S(s.$$.fragment,e)},m(e,a){$(s,e,a),t=!0},p(t,n){e=t;const r={};1&n&&(r.cMark=e[0][3*e[11]+e[14]]),2&n&&(r.qMarks=e[1][3*e[11]+e[14]]),4&n&&(r.cycleMarks=e[2]),32&n&&(r.isHighlighted=e[5](e[11],e[14])),8&n&&(r.isBeingCollapsed=e[3]===3*e[11]+e[14]),16&n&&(r.onClick=a),s.$set(r)},i(e){t||(k(s.$$.fragment,e),t=!0)},o(e){q(s.$$.fragment,e),t=!1},d(e){y(s,e)}}}function J(e){let s,t,n,c=e[7],h=[];for(let a=0;a<c.length;a+=1)h[a]=F(W(e,c,a));const f=e=>q(h[e],1,1,(()=>{h[e]=null}));return{c(){s=a("div");for(let e=0;e<h.length;e+=1)h[e].c();t=b(),this.h()},l(e){s=r(e,"DIV",{class:!0});var a=l(s);for(let s=0;s<h.length;s+=1)h[s].l(a);t=M(a),a.forEach(i),this.h()},h(){o(s,"class","game-board--row svelte-1ctwfcy")},m(e,a){u(e,s,a);for(let t=0;t<h.length;t+=1)h[t].m(s,null);d(s,t),n=!0},p(e,a){if(255&a){let n;for(c=e[7],n=0;n<c.length;n+=1){const r=W(e,c,n);h[n]?(h[n].p(r,a),k(h[n],1)):(h[n]=F(r),h[n].c(),k(h[n],1),h[n].m(s,t))}for(T(),n=c.length;n<h.length;n+=1)f(n);E()}},i(e){if(!n){for(let e=0;e<c.length;e+=1)k(h[e]);n=!0}},o(e){h=h.filter(Boolean);for(let s=0;s<h.length;s+=1)q(h[s]);n=!1},d(e){e&&i(s),N(h,e)}}}function K(e){let s,t,n=e[6],c=[];for(let a=0;a<n.length;a+=1)c[a]=J(_(e,n,a));const h=e=>q(c[e],1,1,(()=>{c[e]=null}));return{c(){s=a("div");for(let e=0;e<c.length;e+=1)c[e].c();this.h()},l(e){s=r(e,"DIV",{class:!0});var t=l(s);for(let s=0;s<c.length;s+=1)c[s].l(t);t.forEach(i),this.h()},h(){o(s,"class","game-board svelte-1ctwfcy")},m(e,a){u(e,s,a);for(let t=0;t<c.length;t+=1)c[t].m(s,null);t=!0},p(e,[t]){if(255&t){let a;for(n=e[6],a=0;a<n.length;a+=1){const r=_(e,n,a);c[a]?(c[a].p(r,t),k(c[a],1)):(c[a]=J(r),c[a].c(),k(c[a],1),c[a].m(s,null))}for(T(),a=n.length;a<c.length;a+=1)h(a);E()}},i(e){if(!t){for(let e=0;e<n.length;e+=1)k(c[e]);t=!0}},o(e){c=c.filter(Boolean);for(let s=0;s<c.length;s+=1)q(c[s]);t=!1},d(e){e&&i(s),N(c,e)}}}function z(e,s,t){let a,n,{cSquares:r}=s,{qSquares:l}=s,{cycleSquares:c}=s,{cycleMarks:i}=s,{collapseSquare:o}=s,{onSquareClick:h}=s;return e.$$set=e=>{"cSquares"in e&&t(0,r=e.cSquares),"qSquares"in e&&t(1,l=e.qSquares),"cycleSquares"in e&&t(8,c=e.cycleSquares),"cycleMarks"in e&&t(2,i=e.cycleMarks),"collapseSquare"in e&&t(3,o=e.collapseSquare),"onSquareClick"in e&&t(9,h=e.onSquareClick)},e.$$.update=()=>{512&e.$$.dirty&&t(4,a=(e,s)=>h(3*e+s)),256&e.$$.dirty&&t(5,n=(e,s)=>!!(null==c?void 0:c.includes(3*e+s)))},[r,l,i,o,a,n,[0,1,2],[0,1,2],c,h,(e,s)=>a(e,s)]}class Z extends e{constructor(e){super(),s(this,e,z,K,t,{cSquares:0,qSquares:1,cycleSquares:8,cycleMarks:2,collapseSquare:3,onSquareClick:9})}}function ee(e,s,t){const a=e.slice();return a[8]=s[t],a}function se(e){let s,t=[],n=new Map,c=e[0];const h=e=>e[8];for(let a=0;a<c.length;a+=1){let s=ee(e,c,a),r=h(s);n.set(r,t[a]=te(r,s))}return{c(){s=a("div");for(let e=0;e<t.length;e+=1)t[e].c();this.h()},l(e){s=r(e,"DIV",{class:!0});var a=l(s);for(let s=0;s<t.length;s+=1)t[s].l(a);a.forEach(i),this.h()},h(){o(s,"class","btn-list svelte-1anfbwf")},m(e,a){u(e,s,a);for(let n=0;n<t.length;n+=1)t[n].m(s,null)},p(e,a){3&a&&(c=e[0],t=g(t,a,h,1,e,c,n,s,m,te,null,ee))},d(e){e&&i(s);for(let s=0;s<t.length;s+=1)t[s].d()}}}function te(e,s){let t,h,g,m,v,p,S,$,k=s[8][0]+"",q=s[8][1]+"";function y(...e){return s[7](s[8],...e)}return{key:e,first:null,c(){t=a("div"),h=a("span"),g=n(k),m=a("sub"),v=n(q),p=b(),this.h()},l(e){t=r(e,"DIV",{class:!0});var s=l(t);h=r(s,"SPAN",{});var a=l(h);g=c(a,k),m=r(a,"SUB",{class:!0});var n=l(m);v=c(n,q),n.forEach(i),a.forEach(i),p=M(s),s.forEach(i),this.h()},h(){o(m,"class","svelte-1anfbwf"),o(t,"class","btn collapse-choice svelte-1anfbwf"),this.first=t},m(e,s){u(e,t,s),d(t,h),d(h,g),d(h,m),d(m,v),d(t,p),S||($=w(t,"click",C(y)),S=!0)},p(e,t){s=e,1&t&&k!==(k=s[8][0]+"")&&f(g,k),1&t&&q!==(q=s[8][1]+"")&&f(v,q)},d(e){e&&i(t),S=!1,$()}}}function ae(e){let s,t,h,f,g,m,v,p,S,$;return{c(){s=a("div"),t=a("div"),h=a("span"),f=n("Next"),g=b(),m=a("div"),v=a("span"),p=n("Reset"),this.h()},l(e){s=r(e,"DIV",{class:!0});var a=l(s);t=r(a,"DIV",{class:!0});var n=l(t);h=r(n,"SPAN",{class:!0});var o=l(h);f=c(o,"Next"),o.forEach(i),n.forEach(i),g=M(a),m=r(a,"DIV",{class:!0});var u=l(m);v=r(u,"SPAN",{class:!0});var d=l(v);p=c(d,"Reset"),d.forEach(i),u.forEach(i),a.forEach(i),this.h()},h(){o(h,"class","btn-text svelte-1anfbwf"),o(t,"class","btn next-game svelte-1anfbwf"),o(v,"class","btn-text svelte-1anfbwf"),o(m,"class","btn reset-game svelte-1anfbwf"),o(s,"class","btn-list svelte-1anfbwf")},m(a,n){u(a,s,n),d(s,t),d(t,h),d(h,f),d(s,g),d(s,m),d(m,v),d(v,p),S||($=[w(t,"click",C((function(){X(e[5])&&e[5].apply(this,arguments)}))),w(m,"click",C((function(){X(e[6])&&e[6].apply(this,arguments)})))],S=!0)},p(s,t){e=s},d(e){e&&i(s),S=!1,P($)}}}function ne(e){let s,t,h,g,m,p,S,$,k,q,y,w,C,T,E,N=e[4].X+"",P=e[4].Y+"",X=e[0]&&se(e),x=e[3]&&ae(e);return{c(){s=a("div"),t=a("p"),h=n(e[2]),g=b(),X&&X.c(),m=b(),x&&x.c(),p=b(),S=a("div"),$=n("Current scores:\n\t\t"),k=a("span"),q=n("X: "),y=n(N),w=n(",\n\t\t"),C=a("span"),T=n("Y: "),E=n(P),this.h()},l(a){s=r(a,"DIV",{class:!0});var n=l(s);t=r(n,"P",{class:!0});var o=l(t);h=c(o,e[2]),o.forEach(i),g=M(n),X&&X.l(n),m=M(n),x&&x.l(n),p=M(n),S=r(n,"DIV",{class:!0});var u=l(S);$=c(u,"Current scores:\n\t\t"),k=r(u,"SPAN",{});var d=l(k);q=c(d,"X: "),y=c(d,N),d.forEach(i),w=c(u,",\n\t\t"),C=r(u,"SPAN",{});var f=l(C);T=c(f,"Y: "),E=c(f,P),f.forEach(i),u.forEach(i),n.forEach(i),this.h()},h(){o(t,"class","status svelte-1anfbwf"),o(S,"class","scores svelte-1anfbwf"),o(s,"class","game-info svelte-1anfbwf")},m(e,a){u(e,s,a),d(s,t),d(t,h),d(s,g),X&&X.m(s,null),d(s,m),x&&x.m(s,null),d(s,p),d(s,S),d(S,$),d(S,k),d(k,q),d(k,y),d(S,w),d(S,C),d(C,T),d(C,E)},p(e,[t]){4&t&&f(h,e[2]),e[0]?X?X.p(e,t):(X=se(e),X.c(),X.m(s,m)):X&&(X.d(1),X=null),e[3]?x?x.p(e,t):(x=ae(e),x.c(),x.m(s,p)):x&&(x.d(1),x=null),16&t&&N!==(N=e[4].X+"")&&f(y,N),16&t&&P!==(P=e[4].Y+"")&&f(E,P)},i:v,o:v,d(e){e&&i(s),X&&X.d(),x&&x.d()}}}function re(e,s,t){let{choices:a}=s,{onChoiceClick:n}=s,{status:r}=s,{isGameOver:l}=s,{scores:c}=s,{onNextGameClick:i}=s,{onResetGameClick:o}=s;return e.$$set=e=>{"choices"in e&&t(0,a=e.choices),"onChoiceClick"in e&&t(1,n=e.onChoiceClick),"status"in e&&t(2,r=e.status),"isGameOver"in e&&t(3,l=e.isGameOver),"scores"in e&&t(4,c=e.scores),"onNextGameClick"in e&&t(5,i=e.onNextGameClick),"onResetGameClick"in e&&t(6,o=e.onResetGameClick)},[a,n,r,l,c,i,o,(e,s)=>n(e)]}class le extends e{constructor(e){super(),s(this,e,re,ne,t,{choices:0,onChoiceClick:1,status:2,isGameOver:3,scores:4,onNextGameClick:5,onResetGameClick:6})}}class ce{constructor(e){this.id=e,this.edges=[]}}class ie{constructor(e,s,t){this.start=e,this.end=s,this.key=t}}class oe{constructor(){this.nodes={},this.edges={}}addNode(e){this.nodes[e]=new ce(e)}getNode(e){return this.nodes[e]}hasNode(e){return e in this.nodes}addEdge(e,s,t){e in this.nodes||this.addNode(e),s in this.nodes||this.addNode(s);const a=new ie(this.getNode(e),this.getNode(s),t),n=new ie(this.getNode(s),this.getNode(e),t);this.getNode(e).edges.push(a),this.getNode(s).edges.push(n),this.edges[t]=a}numNodes(){return Object.keys(this.nodes).length}getCycle(e){var s;if(this.numNodes()<2)return null;const t=this.getNode(e),a=new Set,n=new Map;for(const i of t.edges){if(a.has(i.end))return[[i.start.id,i.end.id],[i.key,null==(s=n.get(i.end))?void 0:s.key]];a.add(i.end),n.set(i.end,i)}const r=[t],l=new Map,c=new Map;for(l.set(t,0),c.set(t,null);void 0!==r&&r.length>0;){const e=r.shift(),s=l.get(e);for(const t of e.edges){if(l.has(t.end)){if(l.get(t.end)===s-1)continue;return this._constructPath(t,c)}r.push(t.end),l.set(t.end,s+1),c.set(t.end,t)}}return null}_constructPath(e,s){const t=[],a=[e.key];let n,r;for(n=e.start;s.get(n);)r=s.get(n),t.push(n.id),a.push(r.key),n=r.start;for(t.push(n.id),n=e.end;s.get(n);)r=s.get(n),t.unshift(n.id),a.unshift(r.key),n=r.start;return[t,a]}}class he{constructor(){this.g=new oe,this.timer=this.timer.bind(this),this.state={cSquares:Array(9).fill(null),qSquares:Array(9).fill([]),currentTurn:1,currentSubTurn:0,lastMove:null,cycleSquares:null,cycleMarks:null,collapseSquare:null,isOver:!1,leftTimes:{X:300,Y:300},scores:{X:0,Y:0},status:"Player X's turn!"}}setState(e){Object.assign(this.state,e)}setLeftTimes(e){Object.assign(this.state.leftTimes,e)}setStatus(e){this.setState({status:e})}whoseTurn(){return this.state.currentSubTurn<2?"X":"Y"}notWhoseTurn(){return this.state.currentSubTurn<2?"Y":"X"}timer(){"X"===this.whoseTurn()&&(this.state.leftTimes.X<=0?this.setState({isOver:!0,status:"Player X has run out of time.  Player Y wins!"}):this.setLeftTimes({X:this.state.leftTimes.X-1})),"Y"===this.whoseTurn()&&(this.state.leftTimes.Y<=0?this.setState({isOver:!0,status:"Player Y has run out of time.  Player X wins!"}):this.setLeftTimes({Y:this.state.leftTimes.Y-1}))}handleSquareClick(e){return 1===this.state.currentTurn&&0===this.state.currentSubTurn&&setInterval(this.timer,1e3),this.state.isOver?"This game is already over!  Start a new game!!":this.state.cycleSquares?this._handleCyclicEntanglement(e):this.state.cSquares[e]?"This square already has a classical mark!  No more quantum marks can go here >:(":this.isSecondMove()&&this.state.lastMove===e?"Can't move twice in the same square!\nWhat do you think this is... regular tic-tac-toe??":this.handleNormalMove(e)}handleNormalMove(e){const s=[...this.state.qSquares],t=`${this.whoseTurn()}${this.state.currentTurn}`;s[e].length>=1?s[e].push(t):s[e]=[t],this.g.hasNode(e)||this.g.addNode(e),this.isSecondMove()&&this.g.addEdge(this.state.lastMove,e,t);const a=this.g.getCycle(e);if(this.setState({qSquares:s,cycleSquares:null==a?void 0:a[0],cycleMarks:null==a?void 0:a[1],currentTurn:this.state.currentTurn+Number(3===this.state.currentSubTurn),currentSubTurn:(this.state.currentSubTurn+1)%4,lastMove:e}),a){return`${`A loop of entanglement has occurred!  Player ${this.notWhoseTurn()} will decide which of the possible states the board will collapse into.`}  Click one of the squares involved in the loop.`}return this.isSecondMove()?"Now put a second quantum move.  This move is entangled with your previous move.  When there is a cycle of entanglement, a collapse will occur and only one of these quantum marks will turn into a classical mark.":`Player ${this.whoseTurn()}'s turn!  Put down a quantum move (these are the small marks).`}_handleCyclicEntanglement(e){var s;return(null==(s=this.state.cycleSquares)?void 0:s.includes(e))?(this.setState({collapseSquare:e}),"Now, choose below which state you want to occupy the selected square."):"Must pick square involved in cyclic entanglement!  (is highlighted in blue)"}handleCollapse(e){console.log(e);const s=this.state.collapseSquare,t=new Set([e]);this._handleCollapseHelper(e,s,t);const a=function(e){const s=function(e){const s=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]],t=[];for(const a of s){const[s,n,r]=[e[a[0]],e[a[1]],e[a[2]]];if(s&&n&&r&&s[0]===n[0]&&s[0]===r[0]){const e=[s[1],n[1],r[1]].map(Number);t.push([Math.max(...e),s[0],a])}}return t}(e);if(0===s.length&&e.filter((e=>!e)).length>1)return null;s.sort();const t={X:0,Y:0};s.length>=1&&(t[s[0][1]]=1);s.length>=2&&(t[s[1][1]]+=.5);3===s.length&&(t[s[2][1]]+=.5);return t}(this.state.cSquares);if(null===a)return this.setState({cycleSquares:null,cycleMarks:null,collapseSquare:null}),`${this.whoseTurn()} next!`;const n=function(e){const s=e.X>e.Y?"X":"Y",t="X"===s?"Y":"X";return e.X+e.Y===1?`${s} wins!!!\n ${s} gets 1 point\n ${t} gets 0 points`:1.5===e.X||1.5===e.Y?`${s} wins with a double three-in-a-row!!!\n ${s} gets 1.5 points \n ${t} gets 0 points`:e.X+e.Y===1.5?`Both players got three-in-a-row, but ${s} got it first!  The mark placed in${s}'s three-in-a-row has a smaller subscript than ${t} \n ${s} gets 1 point \n ${t} gets 0.5 points`:"No players get three-in-a-row..."}(a);return this.setState({status:n,isOver:!0,scores:{X:this.state.scores.X+a.X,Y:this.state.scores.Y+a.Y},cycleSquares:null,cycleMarks:null,collapseSquare:null}),n}_handleCollapseHelper(e,s,t){const a=[...this.state.cSquares],n=[...this.state.qSquares];a[s]=e,n[s]=[],this.setState({cSquares:a,qSquares:n});for(const r of this.g.getNode(s).edges)t.has(r.key)||(t.add(r.key),this._handleCollapseHelper(r.key,r.end.id,t))}isSecondMove(){return 1===this.state.currentSubTurn||3===this.state.currentSubTurn}}function ue(e){let s,t,h,f,g,m,v,w,C,T,E,N,P,X,x,Y,j,A,G,I,O,B,H,D,R,V,L,U,Q,_,W;return t=new Z({props:{cSquares:e[0].cSquares,qSquares:e[0].qSquares,cycleSquares:e[0].cycleSquares,cycleMarks:e[0].cycleMarks,collapseSquare:e[0].collapseSquare,onSquareClick:e[3]}}),f=new le({props:{choices:e[2],status:e[1],isGameOver:e[0].isOver,scores:e[0].scores,onChoiceClick:e[4],onNextGameClick:e[5],onResetGameClick:e[6]}}),{c(){s=a("div"),p(t.$$.fragment),h=b(),p(f.$$.fragment),g=b(),m=a("div"),v=a("p"),w=a("small"),C=a("a"),T=n("GNU Pablic Licensed"),E=b(),N=a("p"),P=a("small"),X=n("QuantumTicTacToe is written by Rohan Pandit in 2017 and changed by Shouhei Uechi in 2021."),x=b(),Y=a("br"),j=b(),A=a("small"),G=n("Copyright © 2021\n\t\t\t"),I=a("a"),O=n("Shouhei Uechi"),B=n(". Rights reserved."),H=b(),D=a("br"),R=b(),V=a("small"),L=n("Copyright © 2017 Rohan Pandit, available at\n\t\t\t"),U=a("a"),Q=n("his GitHub repository"),_=n("."),this.h()},l(e){s=r(e,"DIV",{class:!0});var a=l(s);S(t.$$.fragment,a),h=M(a),S(f.$$.fragment,a),a.forEach(i),g=M(e),m=r(e,"DIV",{class:!0});var n=l(m);v=r(n,"P",{});var o=l(v);w=r(o,"SMALL",{});var u=l(w);C=r(u,"A",{rel:!0,href:!0});var d=l(C);T=c(d,"GNU Pablic Licensed"),d.forEach(i),u.forEach(i),o.forEach(i),E=M(n),N=r(n,"P",{});var p=l(N);P=r(p,"SMALL",{});var $=l(P);X=c($,"QuantumTicTacToe is written by Rohan Pandit in 2017 and changed by Shouhei Uechi in 2021."),$.forEach(i),x=M(p),Y=r(p,"BR",{}),j=M(p),A=r(p,"SMALL",{});var k=l(A);G=c(k,"Copyright © 2021\n\t\t\t"),I=r(k,"A",{rel:!0,href:!0});var q=l(I);O=c(q,"Shouhei Uechi"),q.forEach(i),B=c(k,". Rights reserved."),k.forEach(i),H=M(p),D=r(p,"BR",{}),R=M(p),V=r(p,"SMALL",{});var y=l(V);L=c(y,"Copyright © 2017 Rohan Pandit, available at\n\t\t\t"),U=r(y,"A",{href:!0});var b=l(U);Q=c(b,"his GitHub repository"),b.forEach(i),_=c(y,"."),y.forEach(i),p.forEach(i),n.forEach(i),this.h()},h(){o(s,"class","game svelte-1yal20u"),o(C,"rel","license"),o(C,"href","https://www.gnu.org/licenses/"),o(I,"rel","author"),o(I,"href","https://github.com/u-sho"),o(U,"href","https://github.com/rohanp/QuantumTicTacToe/tree/master/"),o(m,"class","game-footer svelte-1yal20u")},m(e,a){u(e,s,a),$(t,s,null),d(s,h),$(f,s,null),u(e,g,a),u(e,m,a),d(m,v),d(v,w),d(w,C),d(C,T),d(m,E),d(m,N),d(N,P),d(P,X),d(N,x),d(N,Y),d(N,j),d(N,A),d(A,G),d(A,I),d(I,O),d(A,B),d(N,H),d(N,D),d(N,R),d(N,V),d(V,L),d(V,U),d(U,Q),d(V,_),W=!0},p(e,[s]){const a={};1&s&&(a.cSquares=e[0].cSquares),1&s&&(a.qSquares=e[0].qSquares),1&s&&(a.cycleSquares=e[0].cycleSquares),1&s&&(a.cycleMarks=e[0].cycleMarks),1&s&&(a.collapseSquare=e[0].collapseSquare),t.$set(a);const n={};4&s&&(n.choices=e[2]),2&s&&(n.status=e[1]),1&s&&(n.isGameOver=e[0].isOver),1&s&&(n.scores=e[0].scores),f.$set(n)},i(e){W||(k(t.$$.fragment,e),k(f.$$.fragment,e),W=!0)},o(e){q(t.$$.fragment,e),q(f.$$.fragment,e),W=!1},d(e){e&&i(s),y(t),y(f),e&&i(g),e&&i(m)}}}function de(e,s,t){let a;var n;let r=new he;r.setStatus("Player X's turn!");let l=1,c=r.state,i=c.status;return e.$$.update=()=>{129&e.$$.dirty&&t(2,a=null!==c.collapseSquare?null===t(7,n=c.qSquares[c.collapseSquare])||void 0===n?void 0:n.filter((e=>{var s;return null===(s=c.cycleMarks)||void 0===s?void 0:s.includes(e)})):void 0)},[c,i,a,function(e){const s=r.handleSquareClick(e);console.table(r.state),t(0,c=Object.assign({},r.state)),t(1,i=s)},function(e){const s=r.handleCollapse(e);t(0,c=Object.assign({},r.state)),t(1,i=s)},function(){var e;r=new he,r.setState({scores:Object.assign({},c.scores)}),l+=1,t(0,c=Object.assign({},r.state)),t(1,i=`The ${e=l,1===e?"first":2===e?"second":3===e?"third":4===e?"fourth":5===e?"fifth":6===e?"sixth":7===e?"seventh":8===e?"eighth":9===e?"ninth":e%10==1?`${e}st`:e%10==2?`${e}nd`:e%10==3?`${e}rd`:`${e}th`} game!\n${r.state.status}`)},function(){r=new he,r.setStatus("Player X's turn!"),l=1,t(0,c=Object.assign({},r.state)),status=r.state.status},n]}class fe extends e{constructor(e){super(),s(this,e,de,ue,t,{})}}function ge(e){let s,t,h,f,g,m,w,C,T;return t=new Y({}),C=new fe({}),{c(){s=b(),p(t.$$.fragment),h=b(),f=a("main"),g=a("h1"),m=n("Quantum Tic-Tac-Toe"),w=b(),p(C.$$.fragment),this.h()},l(e){x('[data-svelte="svelte-1xuj77o"]',document.head).forEach(i),s=M(e),S(t.$$.fragment,e),h=M(e),f=r(e,"MAIN",{class:!0});var a=l(f);g=r(a,"H1",{class:!0});var n=l(g);m=c(n,"Quantum Tic-Tac-Toe"),n.forEach(i),w=M(a),S(C.$$.fragment,a),a.forEach(i),this.h()},h(){document.title="Quantum Tic-Tac-Toe - Quantum Game Arena",o(g,"class","title"),o(f,"class","svelte-jkku05")},m(e,a){u(e,s,a),$(t,e,a),u(e,h,a),u(e,f,a),d(f,g),d(g,m),d(f,w),$(C,f,null),T=!0},p:v,i(e){T||(k(t.$$.fragment,e),k(C.$$.fragment,e),T=!0)},o(e){q(t.$$.fragment,e),q(C.$$.fragment,e),T=!1},d(e){e&&i(s),y(t,e),e&&i(h),e&&i(f),y(C)}}}export default class extends e{constructor(e){super(),s(this,e,null,ge,t,{})}}
